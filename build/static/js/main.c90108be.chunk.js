(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,a){e.exports=a(308)},194:function(e,t,a){},196:function(e,t,a){},229:function(e,t,a){},231:function(e,t,a){},233:function(e,t,a){},235:function(e,t,a){},294:function(e,t,a){},297:function(e,t,a){},299:function(e,t,a){},302:function(e,t,a){},304:function(e,t,a){},306:function(e,t,a){},308:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),s=a.n(o),c=a(5),i=a(6),l=a(120),u=a(312),p=!1,d=!1,m={marks:[]},g=!1,h={restaurantReviews:[]},v=a(56),f=!1,E=Object(i.c)({marksFetchReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.marks,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MARKS_FETCH_DATA_SUCCESS":return t.marks;case"MARK_ADD_DATA_SUCCESS":return e.concat(t.marks);default:return e}},marksToggleReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MARKER":return t;default:return e}},addMarkerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MARKER":return t;default:return e}},restaurantDetailReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESTAURANT_DETAILS":return t;default:return e}},signInStatusReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN_SUCCESS":return t.status;default:return e}},userFetchReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_FETCH_DATA_SUCCESS":return t.data;case"ADD_GROUP":return Object(v.a)({},e,{userGroups:e.userGroups.concat(t.data)});default:return e}},joinGroupErrorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"JOIN_GROUP_ERROR":return console.log("joingroup reducer"),t.data;default:return e}},addReviewReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_ADD_REVIEW":return console.log(t),t;default:return e}},editReviewReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_EDIT_REVIEW":return t;default:return e}},reviewsContentReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.restaurantReviews,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REVIEWS_CONTENTS":return t.data;case"ADD_REVIEW":return console.log(e),e.concat(t.data);default:return e}},form:u.a});a(192),a(194);var b=a(7),w=a(8),N=a(10),R=a(9),O=a(11),y=(a(196),a(42)),j=a(15),k=a.n(j),I=function(e){return{type:"ADD_MARKER",showModal:e}},S=function(e){return{type:"MARKS_FETCH_DATA_SUCCESS",marks:e}},D=function(e){return function(t){k.a.get(e).then(function(e){t(S(e.data))})}},C=function(e){return{type:"SIGN_IN_SUCCESS",status:e}},M=function(e){return{type:"USER_FETCH_DATA_SUCCESS",data:e}},A=a(54),G=(a(229),function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(N.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).state={errorMessage:null},a.handleSignIn=function(e){a.props.signInSuccess(e)},a.responseGoogle=function(e){e.error?(a.setState({errorMessage:e.error}),a.handleSignIn(!1,e.error)):(a.handleSignIn(!0),a.props.postUser(e.w3))},a}return Object(O.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid signInForm-container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card text-center rounded"},r.a.createElement("img",{className:"card-img-top",src:"",alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h1",{className:"card-title"},"Welcome to",r.a.createElement("br",null),"Map-Share!"),r.a.createElement("p",{className:"card-text"},"This is the best webapp ever."),r.a.createElement(A.GoogleLogin,{className:"btn",clientId:"249486761636-7v9e2d4eopnh2hcedo5fa3uu0uqvg7t1.apps.googleusercontent.com",buttonText:"Login with Google!",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,isSignedIn:!0}),this.state.errorMessage?r.a.createElement("div",{className:"error-message"},"Please sign in to use Map-Share"):null))))}}]),t}(n.Component)),U=Object(c.b)(null,function(e){return{signInSuccess:function(t){return e(C(t))},postUser:function(t){return e(function(e){console.log(e);var t={userFirstName:e.ofa,userLastName:e.wea,userEmail:e.U3,googleId:e.Eea,userPicture:e.Paa};return function(e){k.a.post("https://map-share-api.herokuapp.com/api/users",t).then(function(t){console.log("data after postUser request return: ",t.data),e(M(t.data))}).catch(function(e){console.log("postUser errors: ",e.response)})}}(t))}}})(G),_=(a(231),function(e){return{type:"TOGGLE_MARKER",status:e}}),L=function(e){return{type:"RESTAURANT_DETAILS",data:e}},F=function(e){function t(){return Object(b.a)(this,t),Object(N.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(w.a)(t,[{key:"renderChildren",value:function(){var e=this,t=this.props.children.children;if(t)return r.a.Children.map(t,function(t){if(t)return r.a.cloneElement(t,{map:e.props.map,google:e.props.google,mapcenter:e.props.mapcenter})})}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderChildren())}}]),t}(n.Component),T=(a(233),a(310)),x=a(311),P=a(309),W=(a(235),function(e){var t=e.input,a=e.label,n=e.type,o=e.setOptions,s=e.meta,c=s.touched,i=s.error;return r.a.createElement("div",{className:"control row-12"},r.a.createElement("label",{className:"title"},a),$(t,n,o),c&&i&&r.a.createElement("span",{className:"text-danger"},i))}),$=function(e,t,a){switch(t){case"text":return r.a.createElement("input",Object.assign({className:"form-control"},e,{type:t}));case"select":return r.a.createElement("select",Object.assign({className:"form-control"},e),r.a.createElement("option",null),r.a.createElement("option",{value:"$"},"$"),r.a.createElement("option",{value:"$$"},"$$"),r.a.createElement("option",{value:"$$$"},"$$$"));case"textarea":return r.a.createElement("textarea",Object.assign({className:"form-control"},e,{rows:"3"}));case"rate":return r.a.createElement("div",{className:"rating-container"},K(e,a));default:return r.a.createElement("div",null)}},K=function(e,t){return r.a.createElement("div",{className:"rating"},t.map(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",Object.assign({type:"radio",id:t},e,{value:t})),r.a.createElement("label",{className:"stars",htmlFor:t}))}))},B=Object(P.a)({form:"addLocation",validate:function(e){var t={};return e.restaurantName||(t.restaurantName="*Required"),e.address||(t.address="*Required"),e.priceRange||(t.priceRange="*Required"),e.review||(t.review="*You must write a review..."),e.rating||(t.rating="*Please provide a rating"),t}})(function(e){var t=e.handleSubmit;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:t,className:"form"},r.a.createElement("div",{className:"field"},r.a.createElement(x.a,{name:"restaurantName",component:W,type:"text",label:"Restaurant Name"})),r.a.createElement("div",{className:"field"},r.a.createElement(x.a,{name:"restaurantLocation",component:W,type:"text",label:"Address"})),r.a.createElement("div",{className:"field"},r.a.createElement(x.a,{name:"priceRange",component:W,label:"Price Range",type:"select"})),r.a.createElement("div",{className:"field-rating"},r.a.createElement(x.a,{name:"rating",component:W,label:"Rating",type:"rate",setOptions:[5,4,3,2,1]})),r.a.createElement("div",{className:"field"},r.a.createElement(x.a,{name:"review",component:W,label:"Review",type:"textarea"})),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"btn-control"},r.a.createElement("button",{className:"btn btn-primary btn-block"},"Save")))))}),H=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(N.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.props.addMarker(!1),a.props.position.mark.setMap(null)},a.handleSubmit=function(e){var t=a.props.getUserData.userGroups[a.props.getUserData.userGroups.length-1],n=Object(v.a)({},e,{geometry:{coordinates:[a.props.position.lat,a.props.position.lng]},userId:a.props.getUserData._id,groupId:t,userFirstName:a.props.getUserData.userFirstName,userLastName:a.props.getUserData.userLastName});a.props.saveMark(n),a.props.addMarker(!1)},a}return Object(O.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.addMark;return r.a.createElement("div",null,r.a.createElement(T.a,{show:e.showModal,onHide:this.handleClose,dialogClassName:"dialog"},r.a.createElement(T.a.Header,{closeButton:!0},r.a.createElement(T.a.Title,null,"Add Location")),r.a.createElement(T.a.Body,null,r.a.createElement(B,{onSubmit:this.handleSubmit}))))}}]),t}(n.Component),V=Object(c.b)(function(e){return{addMark:e.addMarkerReducer,getUserData:e.userFetchReducer}},function(e){return{saveMark:function(t){return e(function(e){var t={userId:e.userId,groupId:e.groupId,restaurantName:e.restaurantName,restaurantLocation:e.restaurantLocation,priceRange:e.priceRange,geometry:e.geometry};return console.log("data format: ",e),function(a){k.a.post("https://map-share-api.herokuapp.com/api/restaurants",t).then(function(t){var n={locationId:t.data.locationId,geometry:e.geometry},r={locationId:t.data.locationId,reviewContent:e.review,reviewRating:e.rating,reviewUser:{userId:e.userId,userFirstName:e.userFirstName,userLastName:e.userLastName}};a({type:"MARK_ADD_DATA_SUCCESS",marks:n}),k.a.post("https://map-share-api.herokuapp.com/api/reviews",r).catch(function(e){console.log(e.response)})}).catch(function(e){console.log(e)})}}(t))},addMarker:function(t){return e(I(t))}}})(H),J={position:"absolute",width:"100%",height:"100%"},Y=function(e){function t(e){var a;Object(b.a)(this,t),(a=Object(N.a)(this,Object(R.a)(t).call(this,e))).loadMarker=function(){if(a.props&&a.props.google){var e=a.props.google.maps,t=a.map;a.props.marks.map(function(n){var r={lat:n.geometry.coordinates[0],lng:n.geometry.coordinates[1]},o=new e.Marker({position:r});o.setMap(t),o.addListener("click",function(){t.setCenter(o.getPosition()),a.props.restaurantFetchData(n)})})}},a.setMark=function(e,t){a.setState({newMarkPosition:{lat:e.lat(),lng:e.lng(),mark:t}})};var n=a.props.initialCenter,r=n.lat,o=n.lng;return a.state={currentLocation:{lat:r,lng:o},newMarkPosition:{lat:"",lng:"",mark:{}},target:{}},a}return Object(O.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("currentlocation mounted"),this.props.centerAroundCurrentLocation&&navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var a=t.coords;e.setState({currentLocation:{lat:a.latitude,lng:a.longitude}})}),this.loadMap()}},{key:"componentDidUpdate",value:function(e,t){console.log("current location updated:"),e.google!==this.props.google&&(console.log("CL1"),this.loadMap()),t.currentLocation!==this.state.currentLocation&&(console.log("RECENTER MAP"),this.recenterMap()),e.marks!==this.props.marks&&(this.loadMarker(),console.log("CL2")),console.log("end of currentlocation update")}},{key:"recenterMap",value:function(){var e=this.map,t=this.state.currentLocation,a=this.props.google.maps;if(e){var n=new a.LatLng(t.lat,t.lng);e.panTo(n)}}},{key:"loadMap",value:function(){var e=this;if(this.props&&this.props.google){var t=this.props.google.maps,a=this.refs.map,n=s.a.findDOMNode(a),r=this.props.zoom,o=this.state.currentLocation,c=o.lat,i=o.lng,l=new t.LatLng(c,i),u=Object.assign({center:l,zoom:r,disableDefaultUI:!0});this.map=new t.Map(n,u);var p=this.map;console.log("calling load map"),t.event.addListener(p,"click",function(e){console.log("calling load map on click listener event"),d(p,t,e.latLng)});var d=function(t,a,n){e.props.addMarker(!0);var r=new a.Marker({position:n,map:t,animation:a.Animation.DROP});e.setMark(n,r)}}}},{key:"render",value:function(){var e=Object.assign({},J);return r.a.createElement("div",null,r.a.createElement("div",{style:e,ref:"map"},"Loading map..."),r.a.createElement(V,{position:this.state.newMarkPosition}),r.a.createElement(F,{map:this.map,google:this.props.google,mapcenter:this.state.currentLocation,children:this.props}))}}]),t}(n.Component);Y.defaultProps={zoom:16,initialCenter:{lat:43.6472857,lng:-79.3925776},centerAroundCurrentLocation:!1,visible:!0};var q=Object(c.b)(function(e){return{marks:e.marksFetchReducer,addMark:e.addMarkerReducer,markOnClick:e.marksToggleReducer,signInStatus:e.signInStatusReducer}},function(e){return{marksFetchData:function(t){return e(D(t))},addMarker:function(t){return e(I(t))},toggleMarker:function(t){return e(_(t))},restaurantFetchData:function(t){return e(function(e){return function(t){k.a.get("https://map-share-api.herokuapp.com/api/restaurants/"+e.locationId).then(function(e){var a={locationId:e.data.locationId,restaurantLocation:e.data.restaurantLocation,restaurantName:e.data.restaurantName,priceRange:e.data.restaurantPriceRange};t(L(a)),t(_(!0))}).catch(function(e){return console.log("restaurant get error: ",e.response)})}}(t))}}})(Y),z=a(80),Z=a.n(z),Q=function(e){return function(t){k.a.get("https://map-share-api.herokuapp.com/api/reviews",{params:{locationId:e}}).then(function(e){console.log(e.data),t(X(e.data.restaurantReviews))}).catch(function(e){return console.log("review get error: ",e)})}},X=function(e){return{type:"REVIEWS_CONTENTS",data:e}},ee=function(e){return{type:"ADD_REVIEW",data:e}},te=function(e){return{type:"TOGGLE_ADD_REVIEW",showModal:e}},ae=function(e){return{type:"TOGGLE_EDIT_REVIEW",showModal:e}},ne=(a(294),a(297),a(299),function(e){var t=e.input,a=e.label,n=e.type,o=e.setOptions,s=e.meta,c=s.touched,i=s.error;return r.a.createElement("div",{className:"control row-12"},r.a.createElement("label",{className:"title"},a),re(t,n,o),c&&i&&r.a.createElement("span",{className:"text-danger"},i))}),re=function(e,t,a){switch(t){case"textarea":return r.a.createElement("textarea",Object.assign({className:"form-control"},e,{rows:"3"}));case"rate":return r.a.createElement("div",{className:"rating-container"},oe(e,a));default:return r.a.createElement("div",null)}},oe=function(e,t){return r.a.createElement("div",{className:"rating"},t.map(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",Object.assign({type:"radio",id:t},e,{value:t})),r.a.createElement("label",{className:"stars",htmlFor:t}))}))},se=Object(P.a)({form:"reviewForm",validate:function(e){var t={};return e.review||(t.review="*You must write a review..."),e.rating||(t.rating="*Please provide a rating"),t}})(function(e){var t=e.handleSubmit;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:t,className:"form"},r.a.createElement("div",{className:"field-rating"},r.a.createElement(x.a,{name:"rating",component:ne,label:"Rating",type:"rate",setOptions:[5,4,3,2,1]})),r.a.createElement("div",{className:"field"},r.a.createElement(x.a,{name:"review",component:ne,label:"Review",type:"textarea"})),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"btn-control"},r.a.createElement("button",{className:"btn btn-primary btn-block"},"Save")))))}),ce=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(N.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.props.toggleAddReview(!1)},a.handleSubmit=function(e){var t={locationId:a.props.locationId,reviewUser:{userId:a.props.getUserData._id,userFirstName:a.props.getUserData.userFirstName,userLastName:a.props.getUserData.userLastName},reviewContent:e.review,reviewRating:e.rating};a.props.postReview(t)},a}return Object(O.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.addReview;return r.a.createElement("div",null,r.a.createElement(T.a,{show:e.showModal,onHide:this.handleClose,dialogClassName:"dialog"},r.a.createElement(T.a.Header,{closeButton:!0},r.a.createElement(T.a.Title,null,"Add Review")),r.a.createElement(T.a.Body,null,r.a.createElement(se,{onSubmit:this.handleSubmit}))))}}]),t}(n.Component),ie=Object(c.b)(function(e){return{addReview:e.addReviewReducer,getUserData:e.userFetchReducer}},function(e){return{toggleAddReview:function(t){return e(te(t))},postReview:function(t){return e(function(e){return function(t){k.a.post("https://map-share-api.herokuapp.com/api/reviews",e).then(function(e){t(ee(e.data)),t(te(!1))}).catch(function(e){console.log(e)})}}(t))}}})(ce),le=(a(302),function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(N.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.props.toggleEditReview(!1)},a.handleSubmit=function(e){var t={locationId:a.props.locationId,reviewUser:{userId:a.props.getUserData._id,userFirstName:a.props.getUserData.userFirstName,userLastName:a.props.getUserData.userLastName},reviewContent:e.review,reviewRating:e.rating,reviewId:a.props.reviewId};a.props.putReview(t)},a}return Object(O.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.editReview;return r.a.createElement("div",null,r.a.createElement(T.a,{show:e.showModal,onHide:this.handleClose,dialogClassName:"dialog"},r.a.createElement(T.a.Header,{closeButton:!0},r.a.createElement(T.a.Title,null,"Edit Review")),r.a.createElement(T.a.Body,null,r.a.createElement(se,{onSubmit:this.handleSubmit}))))}}]),t}(n.Component)),ue=Object(c.b)(function(e){return{editReview:e.editReviewReducer,getUserData:e.userFetchReducer}},function(e){return{toggleEditReview:function(t){return e(ae(t))},putReview:function(t){return e(function(e){return function(t){k.a.put("https://map-share-api.herokuapp.com/api/reviews/"+e.reviewId,e).then(function(a){t(Q(e.locationId)),t(ae(!1))}).catch(function(e){console.log(e.response)})}}(t))}}})(le),pe=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(N.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).state={reviewId:""},a.handleOnClose=function(){a.props.toggleMarker(!1)},a.handleAddReview=function(){a.props.toggleAddReview(!0)},a.handleEditReview=function(e){a.props.getUserData._id===e.reviewUser.userId?(a.setState({reviewId:e._id}),a.props.toggleEditReview(!0)):(console.log("current userID: ",a.props.getUserData._id),console.log("not same userID: ",e.reviewUser.userId))},a.getRatingSum=function(e){if(e.length>0){return e.map(function(e){return e.reviewRating}).reduce(function(e,t){return e+t})/e.length}return null},a}return Object(O.a)(t,e),Object(w.a)(t,[{key:"componentWillMount",value:function(){this.props.reviewFetchData(this.props.getRestaurant.data.locationId)}},{key:"componentDidUpdate",value:function(e,t){e.getRestaurant!==this.props.getRestaurant&&this.props.reviewFetchData(this.props.getRestaurant.data.locationId)}},{key:"render",value:function(){var e=this,t=this.props,a=t.getRestaurant,n=t.getReviews;return r.a.createElement("div",null,console.log("getReviews in Details",n),r.a.createElement(ie,{locationId:a.data.locationId}),r.a.createElement(ue,{locationId:a.data.locationId,reviewId:this.state.reviewId}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 p-0"},r.a.createElement("img",{className:"img-fluid",src:"https://cdn-images-1.medium.com/max/1200/1*y6C4nSvy2Woe0m7bWEn4BA.png",alt:""})),r.a.createElement("div",{className:"btn-custom"},r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:this.handleOnClose},"close"))),r.a.createElement("div",{className:"row preview-info-custom"},r.a.createElement("div",{className:"col-8"},a.data.restaurantName),r.a.createElement("div",{className:"col-4"},a.data.priceRange),r.a.createElement("div",{className:"col-12"},a.data.restaurantLocation)),r.a.createElement("div",{className:"row rating"},r.a.createElement("div",{className:"col-12"},"*---- RATING ----*"),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"stars"},r.a.createElement("div",{className:"empty-stars"}),r.a.createElement("div",{className:"full-stars",style:{width:"calc(100% * ".concat(this.getRatingSum(n)/5,")")}})))),r.a.createElement("div",{className:"row review"},r.a.createElement("div",{className:"col-12 mb-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},"All reviews"),r.a.createElement("div",{className:"col-4"},r.a.createElement("button",{onClick:this.handleAddReview,className:"btn btn-primary btn-sm"},"add review")))),r.a.createElement("div",{className:"col-12"},n.length&&n.map(function(t){return r.a.createElement("div",{className:"row",key:t._id,onClick:function(){return e.handleEditReview(t)}},r.a.createElement("div",{className:"col-8"},r.a.createElement("span",null,r.a.createElement("p",{className:"review-user"},t.reviewUser.userFirstName," ",t.reviewUser.userLastName))),r.a.createElement("div",{className:"col-4"},r.a.createElement("p",{className:"review-time"},t.updatedAt?Z()(parseInt(t.updatedAt)).fromNow():Z()(parseInt(t.createdAt)).fromNow())),r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,t.reviewContent)),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",{className:"review-hr"})))}))))}}]),t}(n.Component),de=Object(c.b)(function(e){return{getRestaurant:e.restaurantDetailReducer,getReviews:e.reviewsContentReducer,getUserData:e.userFetchReducer}},function(e){return{toggleMarker:function(t){return e(_(t))},toggleAddReview:function(t){return e(te(t))},toggleEditReview:function(t){return e(ae(t))},reviewFetchData:function(t){return e(Q(t))}}})(pe),me=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(N.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){console.log("firing logout"),a.props.userLogout()},a}return Object(O.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.getUserData.userGroups[this.props.getUserData.userGroups.length-1];console.log("fetch first time"),this.props.marksFetchData("https://map-share-api.herokuapp.com/api/marks?groupId="+e)}},{key:"render",value:function(){var e=this.props,t=e.toggleMarks;e.signInStatus;return r.a.createElement(r.a.Fragment,null,console.log("RENDERING MAPCOMPONENT"),r.a.createElement(q,{centerAroundCurrentLocation:!0,google:this.props.google,userData:this.props.getUserData},r.a.createElement("div",{className:"box-btn-GoogleLogOut"},r.a.createElement(A.GoogleLogout,{buttonText:"Logout",onLogoutSuccess:this.logout,className:"btn-GoogleLogOut"})),t.status?r.a.createElement("div",{className:"detailsContainer container-fluid"},r.a.createElement(de,null)):r.a.createElement("div",{className:"slideOut"}),r.a.createElement(y.InfoWindow,{marker:t.activeMarker,visible:t.showingInfoWindow,onClose:this.onClose},r.a.createElement("div",null,r.a.createElement("h4",null,t.selectedPlace)))))}}]),t}(n.Component),ge=Object(i.d)(Object(c.b)(function(e){return{toggleMarks:e.marksToggleReducer,getUserData:e.userFetchReducer}},function(e){return{marksFetchData:function(t){return e(D(t))},userLogout:function(){return e(function(e){e(C(!1)),e(M({})),e(S([]))})}}}),Object(y.GoogleApiWrapper)({apiKey:"AIzaSyCp4-ZdjyiJMktGIrh4KcBS7xUGPbis8gY"}))(me),he=(a(304),function(e){return{type:"ADD_GROUP",data:e}}),ve=function(e){return{type:"JOIN_GROUP_ERROR",data:e}},fe=(a(306),function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(N.a)(this,Object(R.a)(t).call(this,e))).validate=function(e){if(e){var t=a.props,n=t.action,r=t.getUserData;console.log("dispatch action:",n),"join"===a.props.action?(console.log("group, user",e,r._id),console.log("user thats joining: ",r._id),a.props.joinGroup(e,r._id)):"create"===n?(console.log("want to create group with name: ",e),console.log("user thats creating: ",r._id),a.props.createGroup(e,a.props.getUserData._id)):console.log("invalid action!!!!!!!!")}else a.setState({errorMessage:"You didn't enter anything!"})},a.handleChange=function(e){a.setState({input:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),console.log("action: ",a.props.action),console.log("value: ",a.state.input),a.validate(a.state.input)},console.log("props in constructor",e),a.state={errorMessage:"",input:""},a}return Object(O.a)(t,e),Object(w.a)(t,[{key:"componentDidUpdate",value:function(e,t){e!==this.props&&"join"===this.props.action&&this.setState({errorMessage:this.props.joinGroupError})}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,this.props.text),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.input,onChange:this.handleChange})),r.a.createElement("button",{className:"btn btn-secondary",type:"submit",id:"submit-button"},"Submit"),this.state.errorMessage?r.a.createElement("div",{className:"error-message"},this.state.errorMessage,r.a.createElement("br",null),"You must be in a group to use Map-Share"):null)}}]),t}(n.Component)),Ee=Object(c.b)(function(e){return{getUserData:e.userFetchReducer,joinGroupError:e.joinGroupErrorReducer}},function(e){return{createGroup:function(t,a){return e((n=t,r=a,function(e){console.log("createGroup action!",r),k.a.post("https://map-share-api.herokuapp.com/api/groups",{userId:r,groupName:n}).then(function(t){e(he(t.data._id))}).catch(function(e){return console.log(e.response)})}));var n,r},joinGroup:function(t,a){return e((n=t,r=a,function(e){console.log("joinGroup action!",n,r),k.a.put("https://map-share-api.herokuapp.com/api/users/"+r,{addGroup:n}).then(function(t){e(he(t.data.userGroups[t.data.userGroups.length-1]))}).catch(function(t){e(ve(t.response.data.error.message||t.response.data.error))})}));var n,r}}})(fe),be=function(e){function t(){return Object(b.a)(this,t),Object(N.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid groupForm-container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card text-center rounded"},r.a.createElement("img",{className:"card-img-top",src:"",alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},"You aren't in a group yet!"),r.a.createElement("p",{className:"card-text"},"Please join or create a group"),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("a",{className:"btn btn-primary group-option collapsed","data-toggle":"collapse",href:"#joinGroup",role:"button","aria-expanded":"false","aria-controls":"joinGroup"},"Join Group"),r.a.createElement("a",{className:"btn btn-primary group-option collapsed","data-toggle":"collapse",href:"#createGroup",role:"button","aria-expanded":"false","aria-controls":"createGroup"},"Create Group")),r.a.createElement("div",{id:"groupWrapper"},r.a.createElement("div",{className:"collapse",id:"createGroup","data-parent":"#groupWrapper"},r.a.createElement("div",{className:"card-body"},r.a.createElement(Ee,{text:"New Group Name",action:"create"}))),r.a.createElement("div",{className:"collapse",id:"joinGroup","data-parent":"#groupWrapper"},r.a.createElement("div",{className:"card-body"},r.a.createElement(Ee,{text:"Existing Group Id",action:"join"})))))))))}}]),t}(n.Component),we=Object(c.b)(null,null)(be),Ne=function(e){function t(){return Object(b.a)(this,t),Object(N.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props,t=e.signInStatus,a=e.getUserData;return r.a.createElement(r.a.Fragment,null,t?a.userGroups?a.userGroups&&0!=a.userGroups.length?r.a.createElement(ge,null):r.a.createElement(we,null):r.a.createElement("div",null,"Loading User"):r.a.createElement(U,null))}}]),t}(n.Component),Re=Object(i.d)(Object(c.b)(function(e){return{signInStatus:e.signInStatusReducer,getUserData:e.userFetchReducer}},function(e){return{signInSuccess:function(t){return e(C(t))}}}),Object(y.GoogleApiWrapper)({apiKey:"AIzaSyCp4-ZdjyiJMktGIrh4KcBS7xUGPbis8gY"}))(Ne),Oe=function(e){function t(){return Object(b.a)(this,t),Object(N.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Re,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ye,je=Object(i.e)(E,ye,Object(i.a)(l.a));s.a.render(r.a.createElement(c.a,{store:je},r.a.createElement(Oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[124,2,1]]]);
//# sourceMappingURL=main.c90108be.chunk.js.map